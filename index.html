

<object data="BlankMap-World6.svg" type="image/svg+xml" id="worldMap" onload="registerSvg(this);"></object>

<script type="text/javascript">
var countries = [['hu', '0.4'], ['ru', '-0.3'], ['us', '-0.9'], ['gb', '0']];

//register svg object, and start coloring
var svgDocumentObject;
function registerSvg(o) {
  svgDocumentObject = o.contentDocument; //get the inner DOM of alpha.svg
  colorCountries();
}

function colorCountries() {
  //iterate through countries, and call fillSvgElement for each
  for(var i=0;i<countries.length;i++) {
    if(countries[i] != undefined && countries[i].length == 2) {
      fillSvgElement(svgDocumentObject.getElementById(countries[i][0]), getColor(countries[i][1]), getOpacity(countries[i][1]));
    }
  }
}

function countryClicked(c) {
  fillSvgElement(svgDocumentObject.getElementById(document.getElementById("countryId").value), getColor(1), getOpacity(0.8));
}

function getColor(n) {
  //orange means error
  if(n==0)
    return "#ffffff";
  else if(n>0)
    return "#00ff00";
  else if(n<0)
    return "#ff0000";
}
function getOpacity(n) {
  //dont die if error
  if(n>1 || n<-1 || n==0)
    return 1;
  return Math.abs(n);
}

//set fill color and opacity of and svg element and it's children
function fillSvgElement(e, color, opacity) {
  for(var i=0;i<e.children.length;i++) {
    fillSvgElement(e.children[i], color, opacity);
  }
  e.setAttribute("style","fill:"+color+";opacity:"+opacity+";");
}
</script>

<input type="text" value="hu" id="countryId" />
<input type="button" value="doit" onclick="countryClicked();" />